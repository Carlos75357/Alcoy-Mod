###########################
# Eventos de Influencia de Alcoy
# Sistema de vasallización de la Confederación Ibérica
###########################

add_namespace = alc_influence

# Evento para el país objetivo: Alcoy está aumentando su influencia
country_event = {
	id = alc_influence.1
	title = alc_influence.1.t
	desc = alc_influence.1.desc
	picture = GFX_report_event_generic_diplomacy

	is_triggered_only = yes

	option = {
		name = alc_influence.1.a
		add_political_power = -10
		ai_chance = {
			factor = 50
		}
	}

	option = {
		name = alc_influence.1.b
		add_stability = 0.02
		add_political_power = -20
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_stability < 0.40
			}
		}
	}
}

# Evento para el país objetivo: Sabotaje económico detectado
country_event = {
	id = alc_influence.2
	title = alc_influence.2.t
	desc = alc_influence.2.desc
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		name = alc_influence.2.a
		add_political_power = -15
		ai_chance = {
			factor = 30
		}
	}

	option = {
		name = alc_influence.2.b
		add_stability = 0.03
		add_war_support = 0.02
		add_political_power = -30
		ai_chance = {
			factor = 70
			modifier = {
				factor = 2
				has_stability < 0.35
			}
		}
	}
}

# Evento de vasallización - País objetivo recibe propuesta
country_event = {
	id = alc_influence.10
	title = alc_influence.10.t
	desc = alc_influence.10.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	# Aceptar vasallización
	option = {
		name = alc_influence.10.a
		ALC = {
			set_autonomy = {
				target = ROOT
				autonomous_state = autonomy_puppet
			}
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.1
				has_stability > 0.20
			}
			modifier = {
				factor = 2
				has_war = yes
			}
		}
	}

	# Rechazar - intentar independencia
	option = {
		name = alc_influence.10.b
		trigger = {
			has_stability > 0.10
			has_political_power > 50
		}
		add_stability = -0.10
		add_political_power = -50
		leave_faction = yes
		ALC = {
			add_opinion_modifier = {
				target = ROOT
				modifier = large_decrease
			}
			country_event = { id = alc_influence.11 days = 1 }
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				has_stability > 0.25
			}
		}
	}
}

# Evento para Alcoy: País rechazó vasallización
country_event = {
	id = alc_influence.11
	title = alc_influence.11.t
	desc = alc_influence.11.desc
	picture = GFX_report_event_generic_diplomacy

	is_triggered_only = yes

	option = {
		name = alc_influence.11.a
		add_political_power = 25
		add_stability = -0.05
	}
}

# Evento: Campaña de unidad nacional exitosa
country_event = {
	id = alc_influence.20
	title = alc_influence.20.t
	desc = alc_influence.20.desc
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	option = {
		name = alc_influence.20.a
		add_political_power = 25
		ALC = {
			add_opinion_modifier = {
				target = ROOT
				modifier = small_decrease
			}
		}
	}
}

# Evento: País consolidó su poder (para el país que lo logra)
country_event = {
	id = alc_influence.21
	title = alc_influence.21.t
	desc = alc_influence.21.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = alc_influence.21.a
		add_political_power = 50
		add_war_support = 0.05
	}
}

# Evento para Alcoy: Un país consolidó su poder y resistió la influencia
country_event = {
	id = alc_influence.22
	title = alc_influence.22.t
	desc = alc_influence.22.desc
	picture = GFX_report_event_generic_diplomacy

	is_triggered_only = yes

	option = {
		name = alc_influence.22.a
		add_political_power = -25
		add_stability = -0.03
	}
}
