add_namespace = alcoy_confederation

# Francia - Más propensa a enviar voluntarios
country_event = {
	id = alcoy_confederation.1
	title = alcoy_confederation.1.t
	desc = alcoy_confederation.1.d
	picture = GFX_report_event_spanish_civil_war_soldiers
	
	is_triggered_only = yes
	
	# Enviar voluntarios
	option = {
		name = alcoy_confederation.1.a
		ai_chance = { factor = 50 }
		
		ALC = {
			add_manpower = 5000
			army_experience = 10
			country_event = { id = alcoy_confederation.50 }
		}
		add_manpower = -5000
		add_political_power = -50
		add_opinion_modifier = {
			target = ALC
			modifier = large_increase
		}
	}
	
	# Enviar equipamiento
	option = {
		name = alcoy_confederation.1.b
		ai_chance = { factor = 30 }
		
		ALC = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2000
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 200
			}
			country_event = { id = alcoy_confederation.51 }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# Enviar manpower
	option = {
		name = alcoy_confederation.1.c
		ai_chance = { factor = 20 }
		
		ALC = {
			add_manpower = 5000
			country_event = { id = alcoy_confederation.52 }
		}
		add_manpower = -5000
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# No hacer nada
	option = {
		name = alcoy_confederation.1.e
		ai_chance = { factor = 10 }
		add_political_power = 25
		ALC = { country_event = { id = alcoy_confederation.53 } }
	}
}

# Reino Unido - Más propenso a enviar equipamiento
country_event = {
	id = alcoy_confederation.2
	title = alcoy_confederation.2.t
	desc = alcoy_confederation.2.d
	picture = GFX_report_event_spanish_civil_war_soldiers
	
	is_triggered_only = yes
	
	# Enviar voluntarios
	option = {
		name = alcoy_confederation.2.a
		ai_chance = { factor = 20 }
		
		ALC = {
			add_manpower = 5000
			army_experience = 10
			country_event = { id = alcoy_confederation.50 }
		}
		add_manpower = -5000
		add_political_power = -50
		add_opinion_modifier = {
			target = ALC
			modifier = large_increase
		}
	}
	
	# Enviar equipamiento
	option = {
		name = alcoy_confederation.2.b
		ai_chance = { factor = 50 }
		
		ALC = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 3000
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 300
			}
			country_event = { id = alcoy_confederation.51 }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# Enviar manpower
	option = {
		name = alcoy_confederation.2.c
		ai_chance = { factor = 20 }
		
		ALC = {
			add_manpower = 3000
			country_event = { id = alcoy_confederation.52 }
		}
		add_manpower = -3000
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# No hacer nada
	option = {
		name = alcoy_confederation.2.e
		ai_chance = { factor = 15 }
		add_political_power = 25
		ALC = { country_event = { id = alcoy_confederation.53 } }
	}
}

# Checoslovaquia - Más propenso a enviar equipamiento
country_event = {
	id = alcoy_confederation.3
	title = alcoy_confederation.3.t
	desc = alcoy_confederation.3.d
	picture = GFX_report_event_spanish_civil_war_soldiers
	
	is_triggered_only = yes
	
	# Enviar voluntarios
	option = {
		name = alcoy_confederation.3.a
		ai_chance = { factor = 15 }
		
		ALC = {
			add_manpower = 5000
			army_experience = 10
			country_event = { id = alcoy_confederation.50 }
		}
		add_manpower = -5000
		add_political_power = -50
		add_opinion_modifier = {
			target = ALC
			modifier = large_increase
		}
	}
	
	# Enviar equipamiento
	option = {
		name = alcoy_confederation.3.b
		ai_chance = { factor = 60 }
		
		ALC = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2500
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 250
			}
			country_event = { id = alcoy_confederation.51 }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# Enviar manpower
	option = {
		name = alcoy_confederation.3.c
		ai_chance = { factor = 15 }
		
		ALC = {
			add_manpower = 2000
			country_event = { id = alcoy_confederation.52 }
		}
		add_manpower = -2000
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# No hacer nada
	option = {
		name = alcoy_confederation.3.e
		ai_chance = { factor = 15 }
		add_political_power = 25
		ALC = { country_event = { id = alcoy_confederation.53 } }
	}
}

# Canadá - Más propenso a enviar manpower
country_event = {
	id = alcoy_confederation.4
	title = alcoy_confederation.4.t
	desc = alcoy_confederation.4.d
	picture = GFX_report_event_spanish_civil_war_soldiers
	
	is_triggered_only = yes
	
	# Enviar voluntarios
	option = {
		name = alcoy_confederation.4.a
		ai_chance = { factor = 20 }
		
		ALC = {
			add_manpower = 5000
			army_experience = 10
			country_event = { id = alcoy_confederation.50 }
		}
		add_manpower = -5000
		add_political_power = -50
		add_opinion_modifier = {
			target = ALC
			modifier = large_increase
		}
	}
	
	# Enviar equipamiento
	option = {
		name = alcoy_confederation.4.b
		ai_chance = { factor = 20 }
		
		ALC = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1500
			}
			country_event = { id = alcoy_confederation.51 }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# Enviar manpower
	option = {
		name = alcoy_confederation.4.c
		ai_chance = { factor = 50 }
		
		ALC = {
			add_manpower = 8000
			country_event = { id = alcoy_confederation.52 }
		}
		add_manpower = -8000
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# No hacer nada
	option = {
		name = alcoy_confederation.4.e
		ai_chance = { factor = 15 }
		add_political_power = 25
		ALC = { country_event = { id = alcoy_confederation.53 } }
	}
}

# Nueva Zelanda - Más propenso a enviar manpower
country_event = {
	id = alcoy_confederation.5
	title = alcoy_confederation.5.t
	desc = alcoy_confederation.5.d
	picture = GFX_report_event_spanish_civil_war_soldiers
	
	is_triggered_only = yes
	
	# Enviar voluntarios
	option = {
		name = alcoy_confederation.5.a
		ai_chance = { factor = 20 }
		
		ALC = {
			add_manpower = 5000
			army_experience = 10
			country_event = { id = alcoy_confederation.50 }
		}
		add_manpower = -5000
		add_political_power = -50
		add_opinion_modifier = {
			target = ALC
			modifier = large_increase
		}
	}
	
	# Enviar equipamiento
	option = {
		name = alcoy_confederation.5.b
		ai_chance = { factor = 15 }
		
		ALC = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
			}
			country_event = { id = alcoy_confederation.51 }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# Enviar manpower
	option = {
		name = alcoy_confederation.5.c
		ai_chance = { factor = 55 }
		
		ALC = {
			add_manpower = 5000
			country_event = { id = alcoy_confederation.52 }
		}
		add_manpower = -5000
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# No hacer nada
	option = {
		name = alcoy_confederation.5.e
		ai_chance = { factor = 15 }
		add_political_power = 25
		ALC = { country_event = { id = alcoy_confederation.53 } }
	}
}

# Australia - Más propenso a enviar manpower
country_event = {
	id = alcoy_confederation.6
	title = alcoy_confederation.6.t
	desc = alcoy_confederation.6.d
	picture = GFX_report_event_spanish_civil_war_soldiers
	
	is_triggered_only = yes
	
	# Enviar voluntarios
	option = {
		name = alcoy_confederation.6.a
		ai_chance = { factor = 20 }
		
		ALC = {
			add_manpower = 5000
			army_experience = 10
			country_event = { id = alcoy_confederation.50 }
		}
		add_manpower = -5000
		add_political_power = -50
		add_opinion_modifier = {
			target = ALC
			modifier = large_increase
		}
	}
	
	# Enviar equipamiento
	option = {
		name = alcoy_confederation.6.b
		ai_chance = { factor = 15 }
		
		ALC = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1500
			}
			country_event = { id = alcoy_confederation.51 }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# Enviar manpower
	option = {
		name = alcoy_confederation.6.c
		ai_chance = { factor = 55 }
		
		ALC = {
			add_manpower = 7000
			country_event = { id = alcoy_confederation.52 }
		}
		add_manpower = -7000
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# No hacer nada
	option = {
		name = alcoy_confederation.6.e
		ai_chance = { factor = 15 }
		add_political_power = 25
		ALC = { country_event = { id = alcoy_confederation.53 } }
	}
}

# México - Probabilidad igual para todo
country_event = {
	id = alcoy_confederation.7
	title = alcoy_confederation.7.t
	desc = alcoy_confederation.7.d
	picture = GFX_report_event_spanish_civil_war_soldiers
	
	is_triggered_only = yes
	
	# Enviar voluntarios
	option = {
		name = alcoy_confederation.7.a
		ai_chance = { factor = 30 }
		
		ALC = {
			add_manpower = 5000
			army_experience = 10
			country_event = { id = alcoy_confederation.50 }
		}
		add_manpower = -5000
		add_political_power = -50
		add_opinion_modifier = {
			target = ALC
			modifier = large_increase
		}
	}
	
	# Enviar equipamiento
	option = {
		name = alcoy_confederation.7.b
		ai_chance = { factor = 30 }
		
		ALC = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2000
			}
			country_event = { id = alcoy_confederation.51 }
		}
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# Enviar manpower
	option = {
		name = alcoy_confederation.7.c
		ai_chance = { factor = 30 }
		
		ALC = {
			add_manpower = 5000
			country_event = { id = alcoy_confederation.52 }
		}
		add_manpower = -5000
		add_political_power = -25
		add_opinion_modifier = {
			target = ALC
			modifier = medium_increase
		}
	}
	
	# No hacer nada
	option = {
		name = alcoy_confederation.7.e
		ai_chance = { factor = 15 }
		add_political_power = 25
		ALC = { country_event = { id = alcoy_confederation.53 } }
	}
}

# Evento de formación de la Confederación Ibérica
country_event = {
	id = alcoy_confederation.8
	title = alcoy_confederation.8.t
	desc = alcoy_confederation.8.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	trigger = {
		tag = ALC
	}

	option = {
		name = alcoy_confederation.8.a
		
		# Cambiar nombre de la facción
		set_faction_name = "Iberian Confederation"

		# Añadir países liberados a la facción explícitamente
		if = {
			limit = { ADU = { exists = yes is_in_faction = no is_subject = no } }
			add_to_faction = ADU
		}
		if = {
			limit = { GLC = { exists = yes is_in_faction = no is_subject = no } }
			add_to_faction = GLC
		}
		if = {
			limit = { NAV = { exists = yes is_in_faction = no is_subject = no } }
			add_to_faction = NAV
		}
		if = {
			limit = { ARA = { exists = yes is_in_faction = no is_subject = no } }
			add_to_faction = ARA
		}

		# Dar idea a todos los miembros de la facción
		every_country = {
			limit = {
				is_in_faction_with = ROOT
			}
			add_ideas = ALC_iberic_democracy
		}
	}
}

# Evento de victoria - Notificación para Alcoy (triggered por on_actions)
country_event = {
	id = alcoy_confederation.101
	title = alcoy_confederation.101.t
	desc = alcoy_confederation.101.d
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		name = alcoy_confederation.101.a
		
		# Evento para formar la Confederación Ibérica
		country_event = { id = alcoy_confederation.8 days = 3 }
	}
}

# News Event - La Confederación Mediterránea derrota a España
news_event = {
	id = alcoy_confederation.102
	title = alcoy_confederation.102.t
	desc = alcoy_confederation.102.d
	picture = GFX_news_event_generic_sign_treaty1
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = alcoy_confederation.102.a
		trigger = {
			OR = {
				original_tag = ALC
				is_in_faction_with = ALC
			}
		}
	}
	
	option = {
		name = alcoy_confederation.102.b
		trigger = {
			NOT = {
				OR = {
					original_tag = ALC
					is_in_faction_with = ALC
				}
			}
		}
	}
}

# ============================================================================
# EVENTOS DE NOTIFICACIÓN DE AYUDA PARA ALCOY
# ============================================================================

# Notificación: País envía voluntarios
country_event = {
	id = alcoy_confederation.50
	title = alcoy_confederation.50.t
	desc = alcoy_confederation.50.d
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	option = {
		name = alcoy_confederation.50.a
		add_war_support = 0.02
	}
}

# Notificación: País envía equipamiento
country_event = {
	id = alcoy_confederation.51
	title = alcoy_confederation.51.t
	desc = alcoy_confederation.51.d
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		name = alcoy_confederation.51.a
		add_war_support = 0.01
	}
}

# Notificación: País envía manpower
country_event = {
	id = alcoy_confederation.52
	title = alcoy_confederation.52.t
	desc = alcoy_confederation.52.d
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	option = {
		name = alcoy_confederation.52.a
		add_war_support = 0.01
	}
}

# Notificación: País rechaza ayudar
country_event = {
	id = alcoy_confederation.53
	title = alcoy_confederation.53.t
	desc = alcoy_confederation.53.d
	picture = GFX_report_event_generic_diplomacy

	is_triggered_only = yes

	option = {
		name = alcoy_confederation.53.a
		add_stability = -0.01
	}
}
